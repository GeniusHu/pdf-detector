# PDF相似序列检测器 v2.0

**功能升级**：现在支持检测两个PDF文件中的相似8字序列！支持自定义相似度阈值和差异分析。

## 🆕 v2.0 新功能

- ✅ **8字序列检测**：从4字升级到8字连续序列
- ✅ **相似度检测**：默认相似度阈值75%，可自定义
- ✅ **差异分析**：显示具体的差异类型和内容
- ✅ **灵活模式**：支持完全匹配和相似度检测两种模式
- ✅ **详细统计**：提供高、中、低相似度统计

## 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 基本使用
```bash
# 默认相似度检测（≥0.75）
python main.py 论文1.pdf 论文2.pdf

# 高相似度检测（≥0.9）
python main.py 论文1.pdf 论文2.pdf --similarity 0.9

# 只检测完全匹配
python main.py 论文1.pdf 论文2.pdf --exact
```

## 🎛️ 高级用法

### 相似度阈值控制
```bash
# 低相似度（≥0.6）- 更多结果
python main.py 论文1.pdf 论文2.pdf --similarity 0.6

# 高相似度（≥0.95）- 更精确结果
python main.py 论文1.pdf 论文2.pdf --similarity 0.95

# 完全匹配（相似度=1.0）
python main.py 论文1.pdf 论文2.pdf --similarity 1.0
python main.py 论文1.pdf 论文2.pdf --exact
```

### 其他选项
```bash
# 不保存结果到文件
python main.py 论文1.pdf 论文2.pdf --no-save

# 指定输出文件名
python main.py 论文1.pdf 论文2.pdf --output 相似分析.txt

# 查看帮助
python main.py --help

# 查看版本
python main.py --version
```

## 📊 输出示例

```
================================================================================
PDF文件相似序列检测报告
================================================================================
文件1: 论文1.pdf
文件2: 论文2.pdf
相似度阈值: 0.75
相似序列总数: 23

统计信息:
- 相似序列总数: 23
- 高相似度(>0.9): 5 个
- 中相似度(0.8-0.9): 12 个
- 低相似度(0.75-0.8): 6 个
- 平均相似度: 0.845
- 最高相似度: 0.962
- 最低相似度: 0.753

相似序列详情 (按相似度排序):
--------------------------------------------------------------------------------
1. 相似度: 0.962
   文件1: '人工智能 技术 发展 非常 迅速 machine learning python'
          位置: 页5行10 - 页5行17
   文件2: '人工智能 技术 发展 极其 迅速 machine learning python'
          位置: 页8行15 - 页8行22
   差异: 替换: 非常 → 极其

2. 相似度: 0.913
   文件1: '深度学习 神经网络 2024年 研究 取得 重要 进展'
          位置: 页12行3 - 页12行10
   文件2: '深度学习 神经网络 2025年 研究 取得 重要 进展'
          位置: 页15行8 - 页15行15
   差异: 替换: 2024年 → 2025年
```

## 🔧 处理规则

- ✅ **序列长度**：8个连续字符
- ✅ **过滤规则**：自动过滤标点符号、空格、换行符
- ✅ **英文处理**：一个单词算一个字，不区分大小写
- ✅ **中文处理**：一个汉字算一个字
- ✅ **数字处理**：连续数字算一个字
- ✅ **相似度算法**：基于编辑距离的SequenceMatcher

## 📈 相似度说明

- **1.0**：完全相同
- **0.9-1.0**：高相似度（个别词不同）
- **0.8-0.9**：中等相似度（几个词不同）
- **0.75-0.8**：低相似度（部分不同）
- **<0.75**：不认为相似

## 🎯 差异类型

- **替换**：词被替换（如"2024年" → "2025年"）
- **插入**：新增了词
- **删除**：删除了词
- **完全相同**：无差异

## 性能特点

- **大文件支持**：20万字以上文件处理无压力
- **处理速度**：相似度检测比完全匹配稍慢，但仍在分钟级完成
- **内存优化**：采用优化算法，避免内存溢出
- **结果排序**：按相似度从高到低排序

## 对比旧版本

| 功能 | v1.0 | v2.0 |
|------|------|------|
| 序列长度 | 4字 | 8字 |
| 匹配模式 | 完全匹配 | 相似度检测 |
| 相似度阈值 | 无 | 可自定义0.0-1.0 |
| 差异分析 | 无 | 详细差异说明 |
| 统计信息 | 基础统计 | 详细分级统计 |

## 文件说明

- `main.py` - 主程序（v2.0升级版）
- `duplicate_detector.py` - 相似度检测核心模块
- `sequence_generator.py` - 8字序列生成和相似度计算
- `pdf_extractor.py` - PDF文本提取（未变）
- `text_processor.py` - 文本预处理（未变）
- `requirements.txt` - 依赖包列表（未变）

## 系统要求

- Python 3.7+
- 内存：建议2GB以上（相似度计算需要更多内存）
- 磁盘：确保有足够空间存放PDF文件和结果文件

## 常见问题

**Q: 8字序列相比4字序列有什么优势？**
A: 8字序列能更好地捕捉有意义的语句片段，减少偶然匹配，提高检测质量。

**Q: 相似度阈值如何选择？**
A: 根据需求选择：
- 0.6：宽松检测，适合查找所有可能相关的片段
- 0.75：默认值，平衡准确性和覆盖范围
- 0.9：严格检测，只保留高度相似的片段
- 1.0：完全匹配

**Q: 处理时间会更长吗？**
A: 会稍长一些，因为需要进行相似度计算，但仍在可接受范围内（大文件几分钟完成）。

---

**版本**: v2.0
**主要更新**: 相似度检测、8字序列、差异分析
**开发者**: Claude Code Assistant