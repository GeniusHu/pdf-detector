# PDF相似度检测系统 - 使用说明

## 快速开始

### 安装依赖
```bash
pip install -r requirements.txt
```

### 基本使用

#### 1. 快速模式（推荐）
```bash
python main.py 张远向030500马克思主义理论20250717181713.pdf 试验.pdf --fast --main-content-only
```

#### 2. 超快模式
```bash
python main.py 张远向030500马克思主义理论20250717181713.pdf 试验.pdf --ultra-fast --main-content-only
```

#### 3. 标准模式
```bash
python main.py 张远向030500马克思主义理论20250717181713.pdf 试验.pdf --main-content-only
```

### 常用参数说明

- `--fast`: 快速模式，使用多进程加速（推荐）
- `--ultra-fast`: 超快模式，速度最快但相似度要求更高（≥90%）
- `--main-content-only`: 只对比正文内容，过滤引用、页眉页脚等（默认启用）
- `--similarity 0.8`: 设置相似度阈值（0.0-1.0，默认0.75）
- `--no-save`: 不保存结果到文件
- `--output 结果.txt`: 指定输出文件名

### 内容过滤选项

默认只对比正文内容，如需包含其他内容：

- `--include-references`: 包含参考文献
- `--include-citations`: 包含引文引用
- `--include-footnotes`: 包含脚注
- `--include-headers`: 包含页眉页脚

### 性能说明

| 模式 | 处理时间 | 相似度要求 | 适用场景 |
|------|---------|-----------|---------|
| 标准模式 | 5-15分钟 | ≥75% | 精确分析 |
| 快速模式 | 2-5分钟 | ≥80% | 日常使用（推荐）|
| 超快模式 | 1-3分钟 | ≥90% | 快速检测 |

### 输出文件

结果会自动保存为：
- `fast_文件1_文件2_results.txt` （快速模式）
- `ultra_fast_文件1_文件2_results.txt` （超快模式）
- `similarity_0.75_文件1_文件2_results.txt` （标准模式）

### 文件说明

- `main.py`: 主程序入口
- `enhanced_pdf_extractor.py`: 增强版PDF提取器（支持内容过滤）
- `optimized_duplicate_detector.py`: 优化版检测器（多进程加速）
- `text_processor.py`: 文本处理器
- `requirements.txt`: Python依赖包

### 示例输出

```
================================================================================
PDF相似序列检测器 v2.1 - 正文内容对比版
================================================================================
功能: 快速模式检测相似度≥0.80的8字序列
规则: 过滤标点符号，英文单词算一个字，中文逐字计算，数字整体算一个字

📄 内容过滤设置:
✅ 只对比正文内容（过滤: 引用、批注、页眉页脚等）
📏 最小行长度: 10 字符

🚀 性能优化:
   多进程处理 (进程数: 自动)
   每文件最多5,000个序列

================================================================================
找到 X 个相似度≥0.80的8字序列
详细结果已保存到: fast_张远向030500马克思主义理论20250717181713_试验_results.txt
```

## 常见问题

**Q: 处理时间太长怎么办？**
A: 使用 `--fast` 或 `--ultra-fast` 模式

**Q: 如何提高检测精度？**
A: 使用 `--similarity 0.9` 提高相似度阈值

**Q: 结果太多怎么筛选？**
A: 提高相似度阈值或使用 `--fast` 模式

**Q: 想对比所有内容怎么办？**
A: 不加 `--main-content-only` 参数，或添加 `--include-references` 等选项
